# 깊은복사 얕은복사

- 객체는 다른 객체를 참조할 수 있는데 에럴 경우에 객체의 복사본을 핸들링 할 경우 깊은 복사인가, 얕은 복사인가에 따라 결과값이 달라질 수 있다.

- 복사를 한다는 것은 기존 객체와 같은 값을 가진 새로운 객체로 만든다는 것이다.

- 객체들은 멤버를 가지고 있고 그 멤버들은 값일 수도 있고 참조 형식일 수도 있는데, 이 객체들이 가진 값 형식과 참조 형식의 복제 방식에 따라 얕은 복사와 깊은 복사의 개념이 나누어지게 된다.



#### **얕은 복사(Shallow Copy)**

- 얕은 복사는 객체가 가진 멤버들의 값을 새로운 객체로 복사하는데 만약 객체가 참조타입의 멤버를 가지고 있다면 참조값만 복사가 된다.

- 참조타입의 멤버가 없다면 얕은 복사만으로도 충분하다.

- 얕은 복사는 복제 생성자를 만들 필요가 크게 없다(복제 생성자는 컴파일러가 자동으로 만들어줌)

##### 얕은 복제 생성자 문법 

```c++
 class Foo
 {
     int m1;
     int m2;
     int m3;
     
     
  public:
     Foo(const Foo& src) : m1(scr.m1), m2(scr.m2),m3(scr.m3)   // 복제 생성자 
     {
         // 딱히 뭐 안써도 됨
     }
     
     Foo(const Foo& src)   // 복제 생성자 (노가다ver)
     {
         m1 = src.m1;
         m2 = src.m2;
         m3 = src.m3;
     }
 };  //데이터 멤버가 m1, m2, m3라고 가정할때의 복제 생성자
```





#### **깊은 복사 (Deep Copy)**

- 깊은 복사는 전체 복사라고도 한다.

- 얕은 복사와는 달리 객체가 가진 모든 멤버(값과 참조형식 모두)를 복사하는 것을 말한다.

- 객체가 참조 타입의 멤버를 포함할 경우 참조값의 복사가 아닌 참조된 객체 자체가 복사되는 것을 깊은 복사라 한다.

##### 깊은 복제 생성자 문법 

```c++
 class Foo
 {
     int m1;
     char* m2[5];  // 참조형 멤버가 있음
     
     
  public:   
 Foo(const Foo& other)
	{
		m1 = other.n1;
     
		m2 = new char[5];

		for (int i = 0; i < 5; i++)
		{
			m2[i] = other[i];
		}
	}
 };  //데이터 멤버가 m1, m2 라고 가정할때의 복제 생성자
```